<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="UTF-8">
    <title>Example</title>

    <script type="text/javascript" src="js/declarify.js"></script>

    <style type="text/css">
      div.hover {
        background-color: yellowgreen;
        border: 1px solid red;
      }
      div.focused {
        border-color: red;
      }
      div {
        border: 1px solid black;
        margin: 2px;
        padding: 5px;
      }
      span.disabled {
        color: #666;
      }
      div.fueltank {
        border-color: black;
        border-style: solid;
        margin: 0px;
        padding: 0px;
        display: inline;
        background-color: red;
      }
      div.fueltank + div.fueltank {
        border-style: solid solid solid none;
      }
      div.fueltank.transparent {
        background-color: inherit;
      }
      code {
        color: darkblue;
      }
      li.checked {
        color: red;
      }
    </style>
  </head>

  <body>

    <!--
    // The `control-text-2` widget definition: note the nested widget, and how
    // arguments are passed to it. Also note that "forward" declarations are
    // not necessary.
    -->
    <div data-widget.def="control-text-2" data-name="local*">
      <style type="declarify">
        div {
          border: 1px solid green;
        }
      </style>
      <p
        data-a::dep         = "local*"
        data-a::text        = "$$[':text']">
        Yup, yup.
      </p>
      <input
        data-widget         = "control-text"
        data-a::dep         = "widget.control-text-2"
        data-a::attr.:name  = "$$[':name']"
        data-a::attr.:value = "$$[':value']" />
    </div>

    <!--
    // The `control-text` widget definition: note the JS widget constructor's
    // restricted $ object and the widget-encapsulated CSS rules.
    -->
    <div data-widget.def="control-text">
      <style type="declarify">
        p {
          text-decoration: underline;
        }
        p.foo {
          color: red;
        }
        button {
          color: blue;
        }
      </style>
      <script type="declarify">
        function() {
          $("input").css("color", "#c94");
        }
      </script>
      <input
        type                = "text"
        data-a::dep         = "widget.control-text"
        data-a::attr.value  = "$$[':value']"
        data-a::attr.name   = "$$[':name']" />
      <p>The input box says:
        <code
          class               = "foo"
          data-a::dep         = "widget.control-text"    
          data-a::attr.b::dep = "$$[':name']"
          data-b::text        = "$$.value">
        </code>
      </p>
      <button data-name="hello*">Hello</button>
    </div>

    <!--
    // Widget instances: note the method of specifying arguments.
    -->
    <input data-widget="control-text-2" :name="ct2-1" :text="hello" :value="asdf"/>
    <input data-widget="control-text-2" :name="ct2-2" :text="world" :value="qwer"/>

    <div>
      <p>First input box says:
        <code
          data-a::dep   = "ct2-1"
          data-a::text  = "$$.value">
          foo
        </code>
      </p>
      <p>Second input box says:
        <code
          data-a::dep   = "ct2-2"
          data-a::text  = "$$.value">
          foo
        </code>
      </p>
    </div>

    <form
      data-name             = "f1"
      data-form.json        = "data.json"
      data-form.tpl.success = "tpl.tpl1"
      data-form.tpl.error   = "tpl.formerr">
      <fieldset>
        <ul>
          <li
            data-type   = "checkbox"
            data-name   = "cbr1"
            data-value  = "foo"
            data-checked>
            Foo
          </li>
        </ul>
        <div
          data-a::dep       = "cbr1"
          data-a::attr.hide = "$$.checked">
          Not checked.
        </div>
        <div
          data-a::dep = "cbr1"
          data-a::attr.hide = "!$$.checked">
          Checked.
        </div>
      </fieldset>

      <fieldset>
        <legend>Controls</legend>

        <label>Text
          <input type="text" name="t1" value="asdf"/>
        </label>

        <span
          data-a::dep = "t1"
          data-a::attr.hide = "! $$.focused">
          [focused]
        </span>

        <br>

        <label>Fuel
          <select name="s1">
            <option value="0">E</option>
            <option value="1" selected>&frac14;</option>
            <option value="2">&frac12;</option>
            <option value="3">&frac34;</option>
            <option value="4">F</option>
          </select>
        </label>

        <div class="fueltank"
          data-a::dep = "s1"
          data-a::class.transparent = "$$.value < 1" >
          &nbsp;
        </div>
        <div class="fueltank"
          data-a::dep = "s1"
          data-a::class.transparent = "$$.value < 2" >
          &nbsp;
        </div>
        <div class="fueltank"
          data-a::dep = "s1"
          data-a::class.transparent = "$$.value < 3" >
          &nbsp;
        </div>
        <div class="fueltank"
          data-a::dep = "s1"
          data-a::class.transparent = "$$.value < 4" >
          &nbsp;
        </div>

        <br>

        <p>The input box says:
          <code
            data-a::dep   = "t1"
            data-a::text  = "$$.value" >
          </code>
        </p>

        <select name="s2">
          <option
            data-tpl              = "tpl.tpl1"
            data-a::dep           = "tpl.tpl1"
            data-a::text          = "$$.text"
            data-a::attr.value    = "$$.value"
            data-a::attr.selected = "$$.value == 'FL'">
          </option>
        </select>

        <p>The select combo box says:
          <code
            data-a::dep   = "s2"
            data-a::text  = "$$.value">
          </code>
        </p>

        <label> <input type="checkbox" name="c5" data-checked/> Linked: </label>
        <label> <input type="checkbox" name="c3" data-checked/> Master </label>
        <label>
          <input type="checkbox" name="c4"
            data-a::dep             = "c3 c5"
            data-a::attr.disabled   = "$$('c5').checked"
            data-a::attr.checked    = "$this.disabled ? $$('c3').checked : $same" />
          <span
            data-a::dep             = "c4"
            data-a::class.disabled  = "$$.disabled" >
            Slave
          </span>
        </label>

        <hr>

        <input type="submit" value="click me"/>
        <span
          style             = "color:green"
          data-a::dep       = "f1"
          data-a::attr.hide = "! $$['form.success']">
          <code>
            OK
          </code>
        </span>
        <span
          style             = "color:red"
          data-tpl          = "tpl.formerr"
          data-a::dep       = "f1"
          data-a::attr.hide = "! $$['form.error']">
          <code
            data-a::dep       = "tpl.formerr"
            data-a::text      = "$$.message">
            ERROR
          </code>
        </span>
      </fieldset>
    </form>

    <div name="thename">
      <h2>Hello</h2>

      <p>Move the mouse here and see the help text appear below!</p>

      <label> <input type="checkbox" name="c1" data-checked/> Show help text </label>
      <label> <input type="checkbox" name="c2" data-checked/> Slide animation </label>

    </div>

    <div
      id                      = "test1"
      data-a::dep             = "thename"
      data-a::attr.hide       = "! $$('c1').checked || ! $$.hover"
      data-a::attr.hide.style = "$$('c2').checked ? 'slide' : false" >
      <p>This is the help text!</p>
    </div>
  </body>
</html>
